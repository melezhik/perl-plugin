<%

f = taglib("/lib/form")

f.block do

    #it.getBuilders.each {|b| f.readOnlyTextbox(:value => b.get('class').class) }
                                                                 
    perl_builder = it.getBuilders.select {|b| b.get('class').to_s == 'PerlBuilder' }.first
    if perl_builder.nil? # first time usage of plugin in project
        verbosity_type = 'none'
        f.readOnlyTextbox(:value => 'welcome to the PerlBuilder, I see you use the plugin in the project for the first time')
    else
        verbosity_type = perl_builder.get('verbosity_type')
    end 

    f.entry(:title => 'enabled', :field => 'enabled', :description => "enable/disable this action") do
      f.checkbox
    end

    f.entry(:title => 'enable catalyst debug mode', :field => 'catalyst_debug', :description => "run catalyst tests in debug mode") do
      f.checkbox
    end

    f.entry(:title => 'lookup last tag', :field => 'lookup_last_tag', :description => "find last tag directory") do
      f.checkbox
    end

    f.entry(:title => 'make dist', :field => 'make_dist', :description => "build distributive") do
      f.checkbox
    end

    f.entry(:title => 'color output', :field => 'color_output', :description => "enable/disable color output") do
      f.checkbox
    end

    f.entry(:title => 'source dir', :field => 'source_dir', :description => "set up source directory") do
      f.textbox
    end



    #f.entry(:title => 'it.class', :field => 'foo0', :description => "it.class") do
    #  f.textarea(:value=>it.class)
    #end

    #f.entry(:title => 'it.public_methods', :field => 'foo00', :description => "it.public_methods") do
    #  f.textarea(:value=>it.public_methods.sort.join("\n"))
    #end

    #f.entry(:title => 'getBuilders.first.public_methods', :field => 'foo2', :description => "getBuilders.first.public_methods") do
    #  f.textarea(:value=>it.getBuilders.first.public_methods.sort.join("\n"))
    #end

    #f.entry(:title => 'it.getBuilders.first.get("class")', :field => 'foo6', :description => "it.getBuilders.first.get('class')") do
    #  f.textarea(:value=>it.getBuilders.first.get('class'))
    #end

    f.entry(:title => 'verbosity type', :field => 'verbosity_type', :description => "type of verbosity") do
        f.radio(:name => 'verbosity_type', :value=>'none', :checked => verbosity_type == 'none' ? true : false, :title => 'None' )
        f.radio(:name => 'verbosity_type', :value=>'medium', :checked => verbosity_type == 'medium' ? true : false, :title => 'Medium' )
        f.radio(:name => 'verbosity_type', :value=>'high', :checked => verbosity_type == 'high' ? true : false, :title => 'High' )
    end

    f.advanced do    
        f.entry(:title => 'patches', :field => 'patches', :description => "apply your patches. see https://github.com/melezhik/perl-plugin#advanced-options for details") do
          f.textarea
        end
    end
end
%>

